{{ 'component-main-product.css' | asset_url | stylesheet_tag: preload: true }}
{{ 'component-featured-product.css' | asset_url | stylesheet_tag: preload: true }}
{{ 'component-product-model.css' | asset_url | stylesheet_tag:preload: true}}
{% style %}
  .product-block{
    margin-bottom:{{ section.settings.block_spc }}px; 
  }
{% endstyle %}
  {% assign show_percentage = false %}
  {% assign info_text = '' %}

  {% for block in section.blocks %}
    {% assign current_info_text = block.settings.info_text %}
    {% if block.settings.show_percentage %}
      {% assign show_percentage = true %}
    {% endif %}
    {% if current_info_text != '' %}
      {% assign info_text = current_info_text %}
    {% endif %}
  {% endfor %}

  {%- render 'product-template',  
    section_id: section.id, 
    section: section, 
    product: product, 
    show_percentage:show_percentage,
    info_text: info_text
  -%}


<script src="{{ 'component-main-product.js' | asset_url }}" type="text/javascript" defer></script>
<script src="{{ 'component-product-model.js' | asset_url }}" type="text/javascript" defer></script>
<script src="{{ 'component-product-zoom.js' | asset_url }}" type="text/javascript" defer></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {

      // Initialize Swiper
      const thumbsSwiper = new Swiper('.gallery-thumbs', {
        spaceBetween: 26,
        direction: 'vertical',
        slidesPerView:2.3,
        watchSlidesProgress: true,
      });
    
      const mainSwiper = new Swiper('.gallery-main', {
        spaceBetween: 0,
        navigation: {
          nextEl: '.swiper--next',
          prevEl: '.swiper--prev',
        },
        thumbs: {
          swiper: thumbsSwiper,
        },
      });
    }); 
  </script>

{% schema %}
  {
    "name": "Product",
    "class": "section-main-product",
    "tag": "section",
    "settings": [
      {
        "type": "header",
        "content": "Media",
        "info": "Learn more about [media types](https://help.shopify.com/en/manual/products/product-media)"
      },
      {
        "type": "range",
        "id": "block_spc",
        "min": 10,
        "max": 30,
        "step": 1,
        "unit": "px",
        "label": "Block space",
        "default": 20
      },
      {
        "type": "select",
        "id": "media_width",
        "label": "Size",
        "options": [
          {
            "value": "small",
            "label": "Small"
          },
          {
            "value": "medium",
            "label": "Medium"
          },
          {
            "value": "large",
            "label": "Large"
          }
        ],
        "default": "medium"
      },
      {
        "type": "select",
        "id": "media_ratio",
        "label": "Shape",
        "options": [
          {
            "value": "original",
            "label": "Original"
          },
          {
            "value": "portrait",
            "label": "Portrait (2:3)"
          },
          {
            "value": "square",
            "label": "Square (1:1)"
          },
          {
            "value": "landscape",
            "label": "Landscape (3:2)"
          },
          {
            "value": "full-screen",
            "label": "Full screen (4:3)"
          },
          {
            "value": "wide-screen",
            "label": "Wide screen (16:9)"
          }
        ],
        "default": "original"
      },
      {
        "type": "checkbox",
        "id": "fill_media_zooom",
        "label": "Zoom image to fill space",
        "default": true,
        "info": "No effect when media shape set to 'Original'"
      },
      {
        "type": "checkbox",
        "id": "show_thumbs",
        "label": "Show thumbnails",
        "default": true
      },
      {
        "type": "checkbox",
        "id": "image_zoom",
        "label": "Show image zoom",
        "default": true
      }
    ],
    "blocks": [
      {
        "type": "title",
        "name": "Title",
        "limit": 1,
        "settings": [
          {
            "type": "select",
            "id": "heading_size",
            "label": "Size",
            "options": [
              {
                "value": "h2",
                "label": "Large"
              },
              {
                "value": "h3",
                "label": "Medium"
              },
              {
                "value": "h4",
                "label": "Small"
              }
            ],
            "default": "h2"
          }
        ]
      },
          {
        "type": "vendor",
        "name": "Vendor",
        "limit": 1
      },
      {
        "type": "sku",
        "name": "SKU",
        "limit": 1
      },
      {
        "type": "description",
        "name": "Description",
        "limit": 1,
        "settings": [
          {
            "type": "text",
            "id": "description_label",
            "label": "Title",
            "default": "Description"
          },
          {
            "type": "checkbox",
            "id": "accordion",
            "label": "Apply accordion",
            "default": true
          },
          {
            "type": "checkbox",
            "id": "default_open",
            "label": "By default open",
            "default": true
          }
        ]
      },
      {
        "type": "variants",
        "name": "Variants",
        "limit": 1,
        "settings": [
          {
            "type": "select",
            "id": "variant_type",
            "label": "Type",
            "options": [
              {
                "value": "dropdown",
                "label": "Dropdown"
              },
              {
                "value": "buttons",
                "label": "Radio "
              }
            ]
          },
          {
            "type": "checkbox",
            "id": "hide_size",
            "label": "Hide size",
            "default": true
          },
          {
            "type": "page",
            "id": "size_guide_page",
            "label": "Size guide",
            "info": "Please select the page."
          }
        ]
      },
      {
        "type": "price",
        "name": "Price",
        "limit": 1,
        "settings": [
              {
                "type":"checkbox",
                "id":"show_percentage",
                "label":"Show percentage",
                "default":true
              }
        ]
      },
      {
        "type":"info_text",
        "name": "Info text",
        "limit": 1,
        "settings":[
          {
            "type": "inline_richtext",
            "id": "info_text",
            "default": "my <i>inline</i> <b>text</b>",
            "label": "Information text"
          }
        ]
      },
      {
        "type":"product_sold",
        "name":"Product sold",
        "limit": 1,
        "settings": [

        ]
      },
      {
        "type":"product_stock",
        "name" :"Product stock",
        "limit": 1,
        "settings": [

        ]
      },
      {
        "type": "estimated_delivery",
        "name": "Estimated delivery",
        "limit": 1,
        "settings": [
          {
            "type":"text",
            "id": "estimated_text",
            "label": "Estimated text",
            "default":"Estimated delivery:"
          },
          {
            "type":"number",
            "id":"start_delivery",
            "label":"Start delivery number"
          },
          {
            "type":"number",
            "id":"end_delivery",
            "label":"End delivery number"
          }
        ]
      },
      {
        "type": "return_text",
        "name":"Return text",
        "limit":1,
        "settings": [
          {
            "type":"inline_richtext",
            "id": "return_text",
            "default": "Free return within <b>30 days</b>Â of purchase.",
            "label": "Return text"
          }
        ]
      },
      {
        "type": "store_payment",
        "name": "Store payment",
        "limit": 1,
        "settings": [

        ]
      },
      {
        "type":"free_shipping",
        "name": "Free shipping",
        "limit": 1,
        "settings": [
          {
            "type":"text",
            "id": "shipping_logo_1",
            "label":"Icon one"
          },
          {
            "type":"inline_richtext",
            "id": "shipping_data_1",
            "label":"Text one"
          },
          {
            "type":"text",
            "id": "shipping_logo_2",
            "label":"Icon two"
          },
          {
            "type":"inline_richtext",
            "id": "shipping_data_2",
            "label":"Text two"
          },
          {
            "type":"text",
            "id": "shipping_logo_3",
            "label":"Icon three"
          },
          {
            "type":"inline_richtext",
            "id": "shipping_data_3",
            "label":"Text three"
          }
        ]
      },
      {
        "type": "buy_button",
        "name": "Buy button",
        "limit": 1,
        "settings": [
          {
            "type": "checkbox",
            "id": "show_qnt_picker",
            "label": "Show quantity picker",
            "default": true
          },
          {
            "type": "checkbox",
            "id": "show_gift_card_recipient",
            "default": true,
            "label": "Show gift card recipient"
          }
        ]
      },
      {
        "type": "local_pickup",
        "name": "Local pickup",
        "limit": 1
      },
      {
        "type": "sticky_cart",
        "name": "Sticky cart",
        "limit": 1,
        "settings": [
          {
            "type": "checkbox",
            "id": "show_dynamic_checkout",
            "label": "Show dynamic checkout button",
            "default": true
          }
        ]
      },
      {
        "type": "stock-counter",
        "name": "Stock counter",
        "limit": 1,
        "settings": [
          {
            "type": "range",
            "id": "product_limit",
            "label": "Limit to show counter",
            "min": 3,
            "max": 50,
            "step": 1,
            "default": 20
          }
        ]
      },
      {
        "type": "complementary_products",
        "name": "Complementary products",
        "limit": 1
      },
      {
        "type": "custom_liquid",
        "name": "Custom Liquid",
        "settings": [
          {
            "type": "liquid",
            "id": "custom_liquid",
            "label": "Custom liquid"
          }
        ]
      },
      {
        "type": "@app"
      }
    ]
  }
{% endschema %}
